# ============================================
# Syntra Backend Environment Variables
# ============================================
# Copy this file to .env and fill in your values
# cp env.example .env
#
# For development, you can use placeholder values for optional fields
# Required fields are marked with [REQUIRED]

# ============================================
# LLM Provider API Keys [REQUIRED for full functionality]
# ============================================
# OpenAI API key (for GPT models)
# Get from: https://platform.openai.com/api-keys
OPENAI_API_KEY=

# Google API key (for Gemini models)
# Get from: https://makersuite.google.com/app/apikey
GOOGLE_API_KEY=
# Alternative: GEMINI_API_KEY (both work)

# Perplexity API key (for research/search features)
# Get from: https://www.perplexity.ai/settings/api
PERPLEXITY_API_KEY=

# OpenRouter API key (for routing to multiple providers)
# Get from: https://openrouter.ai/keys
OPENROUTER_API_KEY=

# Kimi/Moonshot API key (for long-context models)
# Get from: https://platform.moonshot.cn/console/api-keys
KIMI_API_KEY=
# Alternative: MOONSHOT_API_KEY (both work)

# ============================================
# Database Configuration [REQUIRED]
# ============================================
# PostgreSQL connection string
# LOCAL DEVELOPMENT: Use local PostgreSQL (faster, more reliable)
DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/dac

# PRODUCTION: Use Supabase (configured during deployment)
# SUPABASE_URL=https://your-project.supabase.co
# SUPABASE_SERVICE_KEY=your-service-key
# DATABASE_URL=postgresql+asyncpg://postgres:your-password@db.project.supabase.co:5432/postgres

# ============================================
# Qdrant Vector Database [REQUIRED]
# ============================================
# Qdrant instance URL
# For local development: http://localhost:6333
# For cloud: https://your-instance.qdrant.io
QDRANT_URL=http://localhost:6333

# Qdrant API key (leave empty for local development)
# For cloud instances, get this from your Qdrant dashboard
QDRANT_API_KEY=

# ============================================
# Redis Configuration [REQUIRED]
# ============================================
# Upstash Redis URL (for production)
# Format: https://your-instance.upstash.io
# For local development, you can use: redis://localhost:6379
UPSTASH_REDIS_URL=redis://localhost:6379

# Upstash Redis token (leave empty for local Redis)
UPSTASH_REDIS_TOKEN=

# ============================================
# Security Configuration [REQUIRED]
# ============================================
# Secret key for JWT token signing
# Generate a secure random string: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=your-secret-key-change-this-in-production

# Algorithm for JWT tokens (default: HS256)
ALGORITHM=HS256

# Access token expiration time in minutes (default: 30)
ACCESS_TOKEN_EXPIRE_MINUTES=30

# Encryption key for provider API keys (Fernet key)
# Generate: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
ENCRYPTION_KEY=your-encryption-key-change-this-in-production

# ============================================
# Email Configuration [OPTIONAL]
# ============================================
# Email address to send from
EMAIL_FROM=noreply@example.com

# SMTP Configuration (optional - use if not using Resend)
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=

# OR use Resend API (recommended)
# Get your API key from https://resend.com/api-keys
RESEND_API_KEY=

# ============================================
# Stripe Billing [OPTIONAL - Required for payments]
# ============================================
# Stripe secret key (get from https://dashboard.stripe.com/apikeys)
STRIPE_SECRET_KEY=

# Stripe publishable key
STRIPE_PUBLISHABLE_KEY=

# Stripe webhook secret (for webhook verification)
STRIPE_WEBHOOK_SECRET=

# Stripe price ID for subscription
STRIPE_PRICE_ID=

# ============================================
# Frontend Configuration
# ============================================
# Frontend URL (for CORS)
# Default: http://localhost:3000
FRONTEND_URL=http://localhost:3000

# ============================================
# Environment
# ============================================
# Environment: development, staging, or production
ENVIRONMENT=development

# ============================================
# Memory & Intelligent Routing Features
# ============================================
# Enable intelligent routing (always recommended)
# Set to 1 to enable intent-based provider selection
INTELLIGENT_ROUTING_ENABLED=1

# Enable memory-based context (disabled for local development)
# LOCAL DEV: Set to 0 (requires Qdrant + OpenAI which adds complexity)
# PRODUCTION: Set to 1 (Supabase has pgvector support built-in)
MEMORY_ENABLED=0

# ============================================
# SuperMemory Integration [OPTIONAL]
# ============================================
# SuperMemory API key for long-term episodic memory
# Get from: https://supermemory.ai
SUPERMEMORY_API_KEY=

# SuperMemory API base URL (default: https://api.supermemory.ai)
SUPERMEMORY_API_BASE_URL=https://api.supermemory.ai

# ============================================
# Rate Limits (defaults)
# ============================================
# Default requests per day per organization
DEFAULT_REQUESTS_PER_DAY=1000

# Default tokens per day per organization
DEFAULT_TOKENS_PER_DAY=100000

# ============================================
# Provider Rate Limiting (Pacer Configuration)
# ============================================
# Shape traffic to avoid 429s while maintaining responsive UX
# Rate limits per provider (requests per second, burst capacity, concurrency)

# Perplexity Rate Limits
PERPLEXITY_RPS=1
PERPLEXITY_BURST=2
PERPLEXITY_CONCURRENCY=3

# OpenAI Rate Limits
OPENAI_RPS=2
OPENAI_BURST=5
OPENAI_CONCURRENCY=5

# Gemini Rate Limits
GEMINI_RPS=2
GEMINI_BURST=5
GEMINI_CONCURRENCY=5

# OpenRouter Rate Limits
OPENROUTER_RPS=2
OPENROUTER_BURST=5
OPENROUTER_CONCURRENCY=5

# ============================================
# Feature Flags
# ============================================
# Enable query rewriter feature (LLM-based context-aware query rewriting)
# Improves handling of ambiguous queries and coreference resolution
FEATURE_COREWRITE=1
feature_corewrite=true

# ============================================
# Firebase / Auth Integration [OPTIONAL]
# ============================================
# Firebase credentials file path
# Path to your Firebase Admin SDK service account JSON file
FIREBASE_CREDENTIALS_FILE=/path/to/your/firebase-adminsdk-xxxxx.json

# Firebase project ID
FIREBASE_PROJECT_ID=

# Default organization ID for new users
DEFAULT_ORG_ID=org_demo

# ============================================
# Clerk Authentication [OPTIONAL]
# ============================================
# Clerk secret key for backend token verification
# Get from Clerk Dashboard > API Keys > Secret Keys
# Format: sk_test_... or sk_live_...
CLERK_SECRET_KEY=

# Clerk publishable key (optional, for reference)
# CLERK_PUBLISHABLE_KEY=pk_test_your-publishable-key

# ============================================
# CORS Configuration
# ============================================
# Comma-separated list of allowed origins
# For development: http://localhost:3000,http://127.0.0.1:3000
# Default localhost origins are always included automatically
CORS_ORIGINS=http://localhost:3000,http://127.0.0.1:3000
